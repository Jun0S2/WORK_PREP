# vi

vim이라는 vi클론버전을 사용하는데, in short, editor라고 인지하면 된다.

## 실행 및 모드

1. `vi` 명령어를 통해 실행 
2. `i` 키로 insert mode에 진입하여 텍스트 입력
3. `esc` 키로 insert 모드 종료
4. `:` 키로 ex mode 진입하여 수행할 처리 진행 (ex : `:wq`, `:q!`)

### 커서
1. `i` : **커서 앞*에 문자를 입력 가능
2. `I` : 커서가 있는 행의 맨 앞에 문자 입력
3. `a` : 커서 다음(after) 문자 입력
4. `A` : 커서가 있는 행의 끝에 문자 입력
5. `o` : 커서 **한줄 아래에 행을 삽입**하고 그곳에 문자 입력
6. `O` : 커서 **한줄 위**에 행 삽입하고 문자 입력

### 커서 이동
1. 화살표 사용
2. khuj 사용
3. `^` : 행의 맨 앞으로 이동
4. `$` : 행의 맨 끝으로 이동

## 문자 삭제

### 키보드 입력으로 삭제

`delete`키나 `backspace` 키로 문자를 삭제할 수 있다.

| 키  | 사용가능모드  |기능   |  커서 이동 방향 |
|---|---|---|---|
| Delete  |  삽입 모드, 명령 모드 | 커서가 있는 문자를 한문자 삭제  | 이동X  | 
|  Backspace | 삽입 모드  |  커서 왼쪽의 문자를 한문자 삭제 | 왼쪽으로 이동  |

### 명령어로 삭제
| 명령  | 기능  |
|---|---|
|  x | 커서가 있는 문자 삭제  |
| X  |  커서 왼쪽의 문자 삭제 |
| J  | 커서가 있는 행의 개행문자(`enter`)삭제  |

## 행 단위 삭제(줄 삭제)

`명령 모드`로 실행한 후 , **삭제하고 싶은 행에 커서를 이동하여 `dd` 입력**

## 복사
복사하고 싶은 행에 커서를 이동하여 `yy`라고 입력

## 붙여넣기
`p`로 paste

## 찾기
1. `/` : 커서가 있는 위치의 뒤쪽에서 검색
2. `?` : 커서 앞쪽에서 검색

```shell
/book            # book을 현재 커서 뒤에서 검색
?thumb           # thumb을 현재 커서 이전에서 검색
```

## 바꾸기
`ctrl`+`f`+replace와 같은 기능으로, `:%s`를 사용한다

바꾸기 방법  : g (일괄적으로 바꾸기)

```shell
:%s/[바꾸기전문자열]/[바꾸기후문자열]/[바꾸기 방법(생략가능)]
:%s/book/jn/g
```

## 저장 및 종료
ex 모드에서 저장하거나 종료하기 위한 명령어
|   명령|기능   |
|---|---|
|  :w | 저장   |
|  :w 파일명 |  다른이름으로 저장  |
| :w!  | 강제로 저장  |
|  :q | 저장하지 않고 종료   |
| :q!  | 저장하지 않고 강제 종료  |
|  **:wq** | **저장하고 종료**|
| :wq!  | 저장하고 강제 종료  |

vim은 편집중인 데이터를 일시적으로 `.swp`라는 확장자를 가진 파일에 저장한다. 이때, vim 편집 중 제대로 저장이 안되고 닫히게 되면 **.swp 파일에 저장**이 되게 된다.
이후에 vi 명령어로 다시 열어봐도 warning이 뜨는데, 대충 

1. `R` : 복구하기
2. `E` : 강제 편집
3. `Q` : 종료
4. `A` : 중단

을 통해서 vi를 종료하라는 내용이다. **불필요한 .swp파일은 rm 명령어로 삭제할 수 있다.**

```shell
ls -a   # 전체 파일을 보고 확인하기
rm bashrc.swp
```

reference : [swp파일지우는방법](https://superuser.com/questions/480367/whats-the-easiest-way-to-delete-vim-swapfiles-ive-already-recovered-from)

